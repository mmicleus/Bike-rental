{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { UserDetails } from 'src/app/shared/user-details.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/data.service\";\nimport * as i2 from \"src/app/shared/network.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction CheckoutFormComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1, \" Please fill out this field \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CheckoutFormComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1, \" Please fill out this field \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CheckoutFormComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1, \" Please fill out this field \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CheckoutFormComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Please fill out this field \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CheckoutFormComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" Please check this box if you want to proceed. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = [\"*\"];\nlet CheckoutFormComponent = /*#__PURE__*/(() => {\n  class CheckoutFormComponent {\n    constructor(dataService, networkService, router) {\n      this.dataService = dataService;\n      this.networkService = networkService;\n      this.router = router;\n      this.submitted = false;\n    }\n    ngOnInit() {\n      this.form = new FormGroup({\n        firstName: new FormControl(null, [Validators.required]),\n        surname: new FormControl(null, [Validators.required]),\n        email: new FormControl(null, [Validators.required, Validators.email]),\n        phone: new FormControl(null, [Validators.required]),\n        joinList: new FormControl(false),\n        termsAgreed: new FormControl(false, [Validators.requiredTrue])\n      });\n    }\n    onSubmit() {\n      this.submitted = true;\n      if (this.form?.invalid) return;\n      let data = {\n        userDetails: new UserDetails(this.form?.get('firstName')?.value, this.form?.get('surname')?.value, this.form?.get('email')?.value, this.form?.get('phone')?.value, this.form?.get('joinList')?.value),\n        bookings: this.dataService.getBookings()\n      };\n      this.networkService.registerBooking(data).subscribe(response => {\n        this.dataService.deleteBookings();\n        this.router.navigate(['/success']);\n      });\n    }\n  }\n  CheckoutFormComponent.ɵfac = function CheckoutFormComponent_Factory(t) {\n    return new (t || CheckoutFormComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.NetworkService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  CheckoutFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CheckoutFormComponent,\n    selectors: [[\"app-checkout-form\"]],\n    ngContentSelectors: _c0,\n    decls: 36,\n    vars: 6,\n    consts: [[3, \"formGroup\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"firstName\", 1, \"form-control\"], [\"class\", \"mt-2 text-danger\", 4, \"ngIf\"], [1, \"form-label\", \"mt-3\"], [\"type\", \"text\", \"formControlName\", \"surname\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"email\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"phone\", 1, \"form-control\", \"mb-3\"], [\"class\", \"mt-2 mb-2 text-danger\", 4, \"ngIf\"], [\"type\", \"checkbox\", \"formControlName\", \"joinList\", 1, \"me-2\"], [\"href\", \"\"], [\"type\", \"checkbox\", \"formControlName\", \"termsAgreed\", 1, \"mt-4\", \"mb-3\"], [1, \"checkout-btn\", \"mb-5\"], [\"type\", \"button\", 1, \"gray-banner\", 3, \"click\"], [1, \"mt-2\", \"text-danger\"], [1, \"mt-2\", \"mb-2\", \"text-danger\"]],\n    template: function CheckoutFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"label\", 1);\n        i0.ɵɵtext(2, \"First Name*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"input\", 2);\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵtext(5, \"The name of the person making the booking. Not necessarily the person participating\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, CheckoutFormComponent_div_6_Template, 2, 0, \"div\", 3);\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementStart(8, \"label\", 4);\n        i0.ɵɵtext(9, \"Surname*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 5);\n        i0.ɵɵtemplate(11, CheckoutFormComponent_div_11_Template, 2, 0, \"div\", 3);\n        i0.ɵɵelementStart(12, \"label\", 4);\n        i0.ɵɵtext(13, \"Email*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 6);\n        i0.ɵɵtemplate(15, CheckoutFormComponent_div_15_Template, 2, 0, \"div\", 3);\n        i0.ɵɵelementStart(16, \"label\", 4);\n        i0.ɵɵtext(17, \"Phone*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 7);\n        i0.ɵɵtemplate(19, CheckoutFormComponent_div_19_Template, 2, 0, \"div\", 8);\n        i0.ɵɵelement(20, \"input\", 9);\n        i0.ɵɵelementStart(21, \"label\");\n        i0.ɵɵtext(22, \"Join our ex-rental bike sale mailing list\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"hr\");\n        i0.ɵɵprojection(24);\n        i0.ɵɵelement(25, \"hr\");\n        i0.ɵɵelementStart(26, \"a\", 10);\n        i0.ɵɵtext(27, \"View our Terms of Service\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"br\")(29, \"input\", 11);\n        i0.ɵɵtext(30, \" I have read and agreed to the Terms of service \");\n        i0.ɵɵtemplate(31, CheckoutFormComponent_div_31_Template, 2, 0, \"div\", 8);\n        i0.ɵɵelement(32, \"hr\");\n        i0.ɵɵelementStart(33, \"div\", 12)(34, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CheckoutFormComponent_Template_button_click_34_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(35, \" CHECKOUT NOW \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        let tmp_1_0;\n        let tmp_2_0;\n        let tmp_3_0;\n        let tmp_4_0;\n        let tmp_5_0;\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.form == null ? null : (tmp_1_0 = ctx.form.get(\"firstName\")) == null ? null : tmp_1_0.valid) && ((ctx.form == null ? null : (tmp_1_0 = ctx.form.get(\"firstName\")) == null ? null : tmp_1_0.touched) || ctx.submitted));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.form == null ? null : (tmp_2_0 = ctx.form.get(\"surname\")) == null ? null : tmp_2_0.valid) && ((ctx.form == null ? null : (tmp_2_0 = ctx.form.get(\"surname\")) == null ? null : tmp_2_0.touched) || ctx.submitted));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.form == null ? null : (tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.valid) && ((ctx.form == null ? null : (tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.touched) || ctx.submitted));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.form == null ? null : (tmp_4_0 = ctx.form.get(\"phone\")) == null ? null : tmp_4_0.valid) && ((ctx.form == null ? null : (tmp_4_0 = ctx.form.get(\"phone\")) == null ? null : tmp_4_0.touched) || ctx.submitted));\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.form == null ? null : (tmp_5_0 = ctx.form.get(\"termsAgreed\")) == null ? null : tmp_5_0.valid) && ((ctx.form == null ? null : (tmp_5_0 = ctx.form.get(\"termsAgreed\")) == null ? null : tmp_5_0.touched) || ctx.submitted));\n      }\n    },\n    dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.CheckboxControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName],\n    styles: [\".checkout-btn[_ngcontent-%COMP%]{display:flex;justify-content:end}\"]\n  });\n  return CheckoutFormComponent;\n})();\nexport { CheckoutFormComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}